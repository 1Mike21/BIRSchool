import{o as _,c as k,s as I,T as N,l as b,e as E,w as n,b as u,d as o,x as v,y,a3 as F,a as t,i as x,u as s,q as P,n as p,j as O,O as T}from"./app-BXMhQWYf.js";import{_ as z,a as D}from"./FormSection-CJ5gCpMo.js";import{_ as f}from"./InputError-G7xtYhoB.js";import{_ as h}from"./InputLabel-Dx5dXBjV.js";import{_ as L}from"./PrimaryButton-DzSzy4Z5.js";import{_ as g}from"./TextInput-BpUs-DRt.js";import"./SectionDescription-D34OcXJ7.js";const R=["type"],S={__name:"ProfileSecondaryButton",props:{type:{type:String,default:"button"}},setup(m){return(c,e)=>(_(),k("button",{type:m.type,class:"inline-flex items-center px-3 py-2.5 bg-white dark:bg-violetButton border border-gray-300 rounded-lg font-medium text-base text-center text-black dark:text-white shadow-sm dark:hover:bg-violetHoverButton hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},[I(c.$slots,"default")],8,R))}},q={key:0,class:"col-span-6 sm:col-span-4"},A={class:"mt-2"},H=["src","alt"],M={class:"mt-2"},G={class:"flex gap-x-4 mt-2 items-center flex-col sm:flex-row md:flex-col justify-center lg:flex-row lg:gap-y-2"},J={class:"col-span-6 sm:col-span-4"},K={class:"col-span-6 sm:col-span-4"},Q={class:"col-span-6 sm:col-span-4"},W={key:0},X={class:"text-sm mt-2"},Y={class:"mt-2 font-medium text-sm text-green-600"},Z={class:"col-span-6 sm:col-span-4"},ne={__name:"UpdateProfileInformationForm",props:{user:Object},setup(m){const c=m,e=N({_method:"PUT",name:c.user.name,surname:c.user.surname,email:c.user.email,phone_number:c.user.phone_number,photo:null}),w=b(null),d=b(null),i=b(null),$=()=>{i.value&&(e.photo=i.value.files[0]),e.post(route("user.user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>V()})},B=()=>{w.value=!0},C=()=>{i.value.click()},U=()=>{const l=i.value.files[0];if(!l)return;const a=new FileReader;a.onload=r=>{d.value=r.target.result},a.readAsDataURL(l)},j=()=>{T.delete(route("user.current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{d.value=null,V()}})},V=()=>{var l;(l=i.value)!=null&&l.value&&(i.value.value=null)};return(l,a)=>(_(),E(z,{onSubmitted:$},{title:n(()=>[u(" Информация о вас ")]),description:n(()=>[u(" Обновите информацию профиля вашей учетной записи. ")]),form:n(()=>[l.$page.props.jetstream.managesProfilePhotos?(_(),k("div",q,[o("input",{id:"photo",ref_key:"photoInput",ref:i,type:"file",class:"hidden",onChange:U},null,544),v(o("div",A,[o("img",{src:m.user.profile_photo_url,alt:m.user.name,class:"rounded-full w-36 sm:w-48 h-36 sm:h-48 object-cover mx-auto"},null,8,H)],512),[[y,!d.value]]),v(o("div",M,[o("span",{class:"block rounded-full mx-auto w-36 sm:w-48 h-36 sm:h-48 bg-cover bg-no-repeat bg-center",style:F("background-image: url('"+d.value+"');")},null,4)],512),[[y,d.value]]),o("div",G,[t(S,{class:"mt-2",type:"button",onClick:x(C,["prevent"])},{default:n(()=>[u(" Обновить фотографию ")]),_:1}),t(S,{class:"mt-2",type:"button",onClick:x(j,["prevent"])},{default:n(()=>[u(" Удалить фотографию ")]),_:1})]),t(f,{message:s(e).errors.photo,class:"mt-2"},null,8,["message"])])):P("",!0),o("div",J,[t(h,{for:"surname",value:"Фамилия",class:"text-black dark:text-white"}),t(g,{id:"surname",modelValue:s(e).surname,"onUpdate:modelValue":a[0]||(a[0]=r=>s(e).surname=r),type:"text",class:p(["mt-1 block w-full bg-white",{"border-red":s(e).errors.surname}]),autocomplete:"surname"},null,8,["modelValue","class"]),t(f,{message:s(e).errors.surname,class:"mt-2"},null,8,["message"])]),o("div",K,[t(h,{for:"name",value:"Имя",class:"text-black dark:text-white"}),t(g,{id:"name",modelValue:s(e).name,"onUpdate:modelValue":a[1]||(a[1]=r=>s(e).name=r),type:"text",class:p(["mt-1 block w-full bg-white",{"border-red":s(e).errors.name}]),autocomplete:"name"},null,8,["modelValue","class"]),t(f,{message:s(e).errors.name,class:"mt-2"},null,8,["message"])]),o("div",Q,[t(h,{for:"email",value:"Email",class:"text-black dark:text-white"}),t(g,{id:"email",modelValue:s(e).email,"onUpdate:modelValue":a[2]||(a[2]=r=>s(e).email=r),type:"email",class:p(["mt-1 block w-full bg-white",{"border-red":s(e).errors.email}]),autocomplete:"email"},null,8,["modelValue","class"]),t(f,{message:s(e).errors.email,class:"mt-2"},null,8,["message"]),l.$page.props.jetstream.hasEmailVerification&&m.user.email_verified_at===null?(_(),k("div",W,[o("p",X,[u(" Ваш адрес электронной почты не подтвержден. "),t(s(O),{href:l.route("verification.send"),method:"post",as:"button",class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:x(B,["prevent"])},{default:n(()=>[u(" Нажмите здесь, чтобы повторно отправить электронное письмо с подтверждением. ")]),_:1},8,["href"])]),v(o("div",Y," На Ваш электронный адрес была отправлена новая ссылка для подтверждения. ",512),[[y,w.value]])])):P("",!0)]),o("div",Z,[t(h,{for:"phone_number",value:"Номер телефона",class:"text-black dark:text-white"}),t(g,{id:"phone_number",modelValue:s(e).phone_number,"onUpdate:modelValue":a[3]||(a[3]=r=>s(e).phone_number=r),type:"text",class:p(["mt-1 block w-full bg-white",{"border-red":s(e).errors.phone_number}]),autocomplete:"phone_number"},null,8,["modelValue","class"]),t(f,{message:s(e).errors.phone_number,class:"mt-2"},null,8,["message"])])]),actions:n(()=>[t(D,{on:s(e).recentlySuccessful,class:"me-3"},{default:n(()=>[u(" Сохранено ")]),_:1},8,["on"]),t(L,{class:p(["hover:bg-gray-700 focus:bg-gray-700 dark:hover:bg-gray-900 dark:focus:bg-gray-900",{"opacity-25":s(e).processing}]),disabled:s(e).processing},{default:n(()=>[u(" Сохранить ")]),_:1},8,["class","disabled"])]),_:1}))}};export{ne as default};
